# 딱하다 (DdakHada)

**"딱, 하루만 더 다니자."**

퇴사를 고민하는 직장인들을 위한 연차 및 퇴직금 계산 시뮬레이터 iOS 앱입니다. 퇴사 예정일을 하루씩 미뤄보며, 그 하루의 가치가 얼마인지 직접 눈으로 확인하고 퇴사 결정에 도움을 주는 것을 목표로 합니다.

## ✨ 핵심 기능

- **퇴사 D-day 카운터**: 퇴사 예정일까지 남은 날짜를 직관적으로 보여줍니다.
- **실시간 계산 시뮬레이션**: 퇴사 예정일을 슬라이더나 버튼으로 조정하면, 예상 퇴직금과 잔여 연차수당이 실시간으로 변경됩니다.
- **"딱 하루 더" 버튼**: 앱의 핵심 기능으로, 퇴사일을 하루 늘렸을 때의 금전적 변화를 즉시 확인하여 동기를 부여합니다.
- **홈 화면 위젯**: 앱을 켜지 않아도 홈 화면에서 D-day와 예상 퇴직금을 바로 확인할 수 있습니다.
- **다양한 근로 조건 지원**:
  - 5인 이상/미만 사업장, 주 15시간 이상/미만 근로 조건에 따른 계산 로직 분리
  - 포괄임금제/비포괄임금제 급여 체계 지원
- **위젯 꾸미기**: 사용자의 취향에 맞게 위젯 배경을 투명/라이트/다크 모드로 설정할 수 있습니다.

## 🛠️ 사용된 기술

- **UI Framework**: SwiftUI
- **Concurrency**: Combine, `ObservableObject`
- **Data Persistence**: `UserDefaults` (App Groups를 통한 앱/위젯 데이터 공유)
- **App Architecture**: MVVM (Model-View-ViewModel)
- **Widget**: WidgetKit
- **Monetization**: Google Mobile Ads (AdMob)

## 🚀 개발 과정 및 주요 문제 해결

이 프로젝트는 초기 기획부터 시작하여, 복잡한 비즈니스 로직 구현과 까다로운 기술적 문제 해결을 거쳐 완성되었습니다.

### 1. 데이터 모델 및 계산 로직 구현
- `UserData`, `Employee`, `WageInput` 등 핵심 데이터 모델을 정의했습니다.
- 근로기준법에 기반하여 연차 및 퇴직금을 계산하는 `CalculationService`를 구현했습니다.

### 2. 위젯 개발 및 데이터 동기화 문제 해결
가장 어렵고 긴 시간이 소요된 부분으로, 앱과 위젯 간의 데이터 동기화 문제를 해결하기 위해 다음과 같은 단계적인 접근을 시도했습니다.

1.  **App Groups 설정**: 앱과 위젯이 데이터를 공유할 수 있도록 `sharedUserDefaults`를 구현했습니다.
2.  **위젯 강제 새로고침**: 앱에서 데이터가 변경될 때마다 `WidgetCenter.shared.reloadAllTimelines()`를 호출하여 위젯에 업데이트 신호를 보내도록 했습니다.
3.  **의존성 분리**: 위젯이 `CalculationService` 같은 복잡한 객체 대신, 순수 계산 함수만 담은 `CalculationHelper`를 사용하도록 구조를 리팩토링했습니다.
4.  **근본 원인 발견**: 모든 시도에도 문제가 해결되지 않아 디버깅한 결과, 코드에 하드코딩된 **App Group ID 문자열**(`group.com.truek.ddakhada`)과 실제 프로젝트 설정에 적용된 ID(`group.com.truekstudio.ddakhada`)가 서로 달랐던 것을 발견하고 수정하여 마침내 문제를 해결했습니다.

### 3. 위젯 UI/UX 개선
- **가독성 향상**: 작은 위젯에서 금액이 잘리는 문제를 해결하기 위해, '만', '억' 단위로 숫자를 축약 표시하는 포맷터를 구현했습니다.
- **레이아웃 최적화**: 위젯 크기(`systemSmall`, `systemMedium`)에 따라 다른 레이아웃을 보여주도록 `@Environment(\.widgetFamily)`를 활용했습니다.
- **사용자 커스터마이징**: 위젯 배경을 투명/라이트/다크 모드로 변경할 수 있는 기능을 추가했습니다.


---

이 프로젝트는 단순한 계산기를 넘어, 개발 과정에서 마주치는 복잡하고 끈질긴 문제들을 바이브 코딩과 함께 어떻게 체계적으로 분석하고 해결해나가는지에 대한 훌륭한 여정이었습니다. 
함께해주셔서 감사합니다!
